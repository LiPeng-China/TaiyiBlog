## 一、前缀索引优化

使用字段中前几个字符建立索引。

**优势**

- 减小索引字段大小，增加一个索引页中存储的索引值。

**局限性**

- `ORDER BY` 无法使用前缀索引；
- 无法把前缀索引用作覆盖索引。

## 二、覆盖索引优化

SQL 需要查询的字段包含在二级索引中，不需要回表操作。

**优势**

- 避免回表，较少 I/O 操作。

## 三、主键索引自增

使用主键自增，每次插入新记录，都只追加操作，不需要移动数据。

**页分裂**

- 主键不增增，每次插入新记录，可能会插入到数据页中间的某个位置，需要一动其它数据来满足新纪录的插入，甚至需要从一个页面复制数据到两一个页面；
- 可能会造成大量的内存碎片，导致索引结构不紧凑，从而影响查询效率。

**主键字段不宜过长**

- 主键字段长度越小，意味着二级索引的叶子结点越小，二级索引占用的空间就越小。

## 四、索引设置 NOT NULL

索引列设置 NOT NULL 约束。

- NULL 值会时索引、索引统计、值比较都更复杂（`count` 会忽略值为 NULL 的行），导致优化器难以优化。
- 至少占用一字节的空间存储 NULL值列表。

## 五、防止索引失效

索引失效的查询语句：

- **左或左右模糊匹配**，如 `like %xx` 和 `like %xx%` ，会导致索引失效
- 在查询条件中对索引列做**计算、函数、类型转换**操作，会导致索引失效；
- 联合索引需要遵循**最左匹配原则**；
- `WHERE` 子句中，`OR` 前面的列是索引列而后面的列不是索引列会导致索引失效。